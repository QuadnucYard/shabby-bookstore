import{q as B,G as T,g as R,d as U,H as $,z,E as w}from"./element-plus-d03682ba.js";import{g as A,r as D,m as M}from"./favorites-ca9d7093.js";import"./array-extensions-336e79e9.js";import{J as N,e as p,i as G,j as I,o as C,c as L,a as v,S,u as m,Q as j,R as l,X as a,G as V,V as i,W as x}from"./@vue-7143f52f.js";import"./lodash-es-6689e95d.js";import"./@vueuse-71394f68.js";import"./@element-plus-b2faaa35.js";import"./@popperjs-c75af06c.js";import"./@ctrl-43a4208a.js";import"./dayjs-904a9561.js";import"./@kangc-6605a7f7.js";import"./vue-58b885c9.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./escape-html-1d60d822.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-b3b4f581.js";import"./index-92d13067.js";import"./vue-router-cfababd1.js";import"./vuex-af3025ab.js";import"./axios-6667cfca.js";import"./form-data-d2a9677b.js";const q={class:"favorites-wrap"},H={class:"favorites"},J={class:"favorites-total"},Q={class:"left"},fe=N({__name:"favorites",setup(W){const _=p(!0),n=p(!0),s=p([]);G(async()=>{const o=await A();s.value=o.map(e=>({bid:e.book.bid,checked:!0,name:e.book.name,cover:e.book.cover,price:e.book.price})),_.value=!1});const f=I(()=>s.value.filter(o=>o.checked).map(o=>o.bid)),k=o=>{s.value.forEach(e=>e.checked=o)},h=o=>{o?s.value.removeAt(s.value.findIndex(e=>e.bid==o)):s.value=s.value.filter(e=>!e.checked)},g=async o=>{const e=await D(o?[o]:f.value);w.success(e.message),h(o)},b=async o=>{const e=await M(o?[o]:f.value);w.success(e.message),h(o)};return(o,e)=>{const d=B,r=T,E=R,c=U,y=$,F=z;return C(),L("div",q,[v("div",H,[S((C(),j(y,{data:m(s)},{default:l(()=>[a(r,{width:"60",align:"center"},{header:l(()=>[a(d,{modelValue:m(n),"onUpdate:modelValue":e[0]||(e[0]=t=>V(n)?n.value=t:null),label:"全选",size:"small",onChange:k},null,8,["modelValue"])]),default:l(t=>[a(d,{modelValue:t.row.checked,"onUpdate:modelValue":u=>t.row.checked=u},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(r,{width:"80",align:"center"},{default:l(t=>[a(E,{src:t.row.cover,style:{width:"80px",height:"80px"},fit:"contain"},null,8,["src"])]),_:1}),a(r,{width:"600",label:"商品信息"},{default:l(t=>[a(c,null,{default:l(()=>[i(x(t.row.name),1)]),_:2},1024)]),_:1}),a(r,{width:"120",label:"单价（元）",align:"center"},{default:l(t=>[i(" ￥"+x(t.row.price.toFixed(2)),1)]),_:1}),a(r,{width:"100",label:"操作",align:"center"},{default:l(t=>[a(c,{onClick:u=>g(t.row.bid)},{default:l(()=>[i("删除")]),_:2},1032,["onClick"]),a(c,{onClick:u=>b(t.row.bid)},{default:l(()=>[i("移入购物车")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[F,m(_)]])]),v("div",J,[v("div",Q,[a(d,{modelValue:m(n),"onUpdate:modelValue":e[1]||(e[1]=t=>V(n)?n.value=t:null),label:"全选",size:"small",onChange:k},null,8,["modelValue"]),a(c,{class:"fn-batch-remove",onClick:e[2]||(e[2]=t=>g())},{default:l(()=>[i("批量删除")]),_:1}),a(c,{class:"fn-batch-move",onClick:e[3]||(e[3]=t=>b())},{default:l(()=>[i("批量移入购物车")]),_:1})])])])}}});export{fe as default};
