import{E as d,a as $,b as B,c as N,d as z,e as D,f as H}from"./element-plus-d03682ba.js";import{u as L}from"./vue-router-cfababd1.js";import{u as R}from"./vuex-af3025ab.js";import{J as x,i as T,j as F,ag as k,o as m,c as f,X as e,R as t,F as j,a6 as A,Q as G,T as J,V as r,W as h,a as i,S as g,Y as y,u as _,ba as Q,b8 as U}from"./@vue-7143f52f.js";import{a as W,l as X}from"./auth-7bd062c3.js";import{R as Y,S as q,T as K,G as O,U as P,V as Z}from"./@element-plus-b2faaa35.js";import{_ as w}from"./index-92d13067.js";import"./lodash-es-6689e95d.js";import"./@vueuse-71394f68.js";import"./@popperjs-c75af06c.js";import"./@ctrl-43a4208a.js";import"./dayjs-904a9561.js";import"./@kangc-6605a7f7.js";import"./vue-58b885c9.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./escape-html-1d60d822.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-b3b4f581.js";import"./axios-6667cfca.js";import"./form-data-d2a9677b.js";const ee=n=>(Q("data-v-5b17bf80"),n=n(),U(),n),te=ee(()=>i("i",{class:"el-icon-menu",style:{float:"right","font-size":"45px",color:"#222","padding-top":"8px"}},null,-1)),oe={class:"right"},ae=x({__name:"navmenu",setup(n){const l=L(),o=R(),p=[{name:"/",navItem:"首页",comp:q},{name:"/book/list",navItem:"商品列表",comp:K},{name:"/favorites",navItem:"收藏夹",comp:O},{name:"/shopping_cart",navItem:"购物车",comp:P},{name:"/shopping/checkout",navItem:"我的订单",comp:Z}];T(async()=>{if(o.state.user)try{await W()}catch{d.warning("当前用户登录状态已过期，请重新登录"),o.commit("logout"),l.push({name:"home"})}});const s=F(()=>{var a;return(a=o.state.user)==null?void 0:a.uname}),I=async()=>{try{await X(),d.success("成功注销")}catch(a){console.error(a),d.warning("注销异常，但是成功了")}o.commit("logout"),l.push({name:"home"})},b=()=>{console.log(o.state.user),l.push({name:"userhome",params:{uid:o.state.user.uid}})};return(a,le)=>{const E=$,S=B,C=N,v=k("router-link"),c=z,M=D;return m(),f("div",null,[e(C,{"default-active":"/",router:"",mode:"horizontal","background-color":"white","text-color":"#222","active-text-color":"green",style:{"min-width":"600px",display:"inline-block"}},{default:t(()=>[(m(),f(j,null,A(p,(u,V)=>e(S,{key:V,index:u.name},{default:t(()=>[e(E,null,{default:t(()=>[(m(),G(J(u.comp)))]),_:2},1024),r(" "+h(u.navItem),1)]),_:2},1032,["index"])),64)),te]),_:1}),i("div",oe,[g(i("div",null,[e(c,{type:"primary",underline:!1},{default:t(()=>[e(v,{to:{name:"register"}},{default:t(()=>[r("注册")]),_:1})]),_:1}),e(c,{type:"primary",underline:!1},{default:t(()=>[e(v,{to:{name:"login"}},{default:t(()=>[r("登录")]),_:1})]),_:1})],512),[[y,!_(s)]]),g(i("div",null,[e(c,{type:"default",underline:!1,onClick:b},{default:t(()=>[e(M,{size:30,icon:_(Y)},null,8,["icon"]),r(" "+h(_(s)),1)]),_:1}),e(c,{type:"primary",underline:!1,onClick:I},{default:t(()=>[r(" 注销 ")]),_:1})],512),[[y,_(s)]])])])}}});const ne=w(ae,[["__scopeId","data-v-5b17bf80"]]),se={class:"main-wrapper"},re={class:"main"},ie=x({__name:"index",setup(n){return(l,o)=>{const p=H,s=k("router-view");return m(),f("div",se,[e(p,{class:"header"},{default:t(()=>[e(ne)]),_:1}),i("div",re,[e(s)])])}}});const $e=w(ie,[["__scopeId","data-v-d3e77af6"]]);export{$e as default};
