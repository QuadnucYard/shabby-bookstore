import{k as x,l as q,q as U,m as k,n as C,r as I,E as i}from"./element-plus-d03682ba.js";import{b as R,u as $}from"./vue-router-cfababd1.js";import{u as B}from"./vuex-af3025ab.js";import{J as F,a0 as S,e as N,ag as h,o as M,c as J,X as o,R as m,u as t,V as n,$ as T,ba as X,b8 as j,a as z}from"./@vue-7143f52f.js";import{r as A}from"./auth-7bd062c3.js";import{e as D}from"./rsaEncrypt-33a8859d.js";import{_ as G}from"./index-92d13067.js";import"./lodash-es-6689e95d.js";import"./@vueuse-71394f68.js";import"./@element-plus-b2faaa35.js";import"./@popperjs-c75af06c.js";import"./@ctrl-43a4208a.js";import"./dayjs-904a9561.js";import"./@kangc-6605a7f7.js";import"./vue-58b885c9.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./escape-html-1d60d822.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-b3b4f581.js";import"./jsencrypt-a25df808.js";import"./axios-6667cfca.js";import"./form-data-d2a9677b.js";const H=d=>(X("data-v-673c69d5"),d=d(),j(),d),K={class:"center-form-wrapper"},L=H(()=>z("h1",{class:"title"},"注册",-1)),O=F({__name:"register",setup(d){const g=R(),f=$(),_=B(),r=S({username:"",name:"",code:"",pwd:"",cpwd:"",email:"",phone:"",address:"",agreed:!1}),c={username:[{required:!0,type:"string",message:"请输入用户名",trigger:"blur"},{min:3,message:"用户名不能太短！",trigger:"blur"},{max:16,message:"用户名不能太长！",trigger:"blur"}],email:[{required:!0,type:"email",message:"请输入邮箱",trigger:"blur"}],pwd:[{required:!0,message:"创建密码",trigger:"blur"}],cpwd:[{required:!0,message:"确认密码",trigger:"blur"},{validator:(u,e,s)=>{e===""?s(new Error("请再次输入密码")):e!==r.pwd?s(new Error("两次输入密码不一致")):s()},trigger:"blur"}],phone:[{required:!0,message:"请输入联系方式",trigger:"blur"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:2,max:10,message:"您确定姓名没有填错？",trigger:"blur"}],address:[{required:!0,message:"请输入地址",trigger:"blur"},{min:8,message:"不填详细点真的说得过去吗？",trigger:"blur"}],agreed:[{validator:(u,e,s)=>{e!==!0?s(new Error("请确认同意注册协议")):s()},trigger:"blur"}]},p=N();async function V(u){console.log("submit register111"),await u.validate(async(e,s)=>{if(!e)return;const l=await A({username:r.username,password:D(r.pwd),name:r.name,phone:r.phone,email:r.email,address:r.address});console.log("reRegister",l),l.code==200?(_.commit("login",l.data),f.replace({path:g.query.redirect??"/auth/login"}),i.success(l.message)):i.error(l.message)})}return(u,e)=>{const s=x,l=q,b=U,w=k,y=h("router-link"),E=C,v=I;return M(),J("div",K,[o(v,{class:"center-form"},{default:m(()=>[o(E,{ref_key:"formRef",ref:p,model:t(r),rules:c,"label-width":"80px",autocomplete:"off"},{default:m(()=>[L,o(l,{label:"用户名",prop:"username"},{default:m(()=>[o(s,{modelValue:t(r).username,"onUpdate:modelValue":e[0]||(e[0]=a=>t(r).username=a)},null,8,["modelValue"])]),_:1}),o(l,{label:"密码",prop:"pwd"},{default:m(()=>[o(s,{modelValue:t(r).pwd,"onUpdate:modelValue":e[1]||(e[1]=a=>t(r).pwd=a),type:"password"},null,8,["modelValue"])]),_:1}),o(l,{label:"确认密码",prop:"cpwd"},{default:m(()=>[o(s,{modelValue:t(r).cpwd,"onUpdate:modelValue":e[2]||(e[2]=a=>t(r).cpwd=a),type:"password"},null,8,["modelValue"])]),_:1}),o(l,{label:"邮箱",prop:"email"},{default:m(()=>[o(s,{modelValue:t(r).email,"onUpdate:modelValue":e[3]||(e[3]=a=>t(r).email=a)},null,8,["modelValue"])]),_:1}),o(l,{label:"联系方式",prop:"phone"},{default:m(()=>[o(s,{modelValue:t(r).phone,"onUpdate:modelValue":e[4]||(e[4]=a=>t(r).phone=a)},null,8,["modelValue"])]),_:1}),o(l,{label:"姓名",prop:"name"},{default:m(()=>[o(s,{modelValue:t(r).name,"onUpdate:modelValue":e[5]||(e[5]=a=>t(r).name=a)},null,8,["modelValue"])]),_:1}),o(l,{label:"地址",prop:"address"},{default:m(()=>[o(s,{modelValue:t(r).address,"onUpdate:modelValue":e[6]||(e[6]=a=>t(r).address=a)},null,8,["modelValue"])]),_:1}),o(l,{prop:"agreed"},{default:m(()=>[o(b,{modelValue:t(r).agreed,"onUpdate:modelValue":e[7]||(e[7]=a=>t(r).agreed=a)},{default:m(()=>[n("同意注册协议")]),_:1},8,["modelValue"])]),_:1}),o(l,null,{default:m(()=>[o(w,{type:"primary",onClick:e[8]||(e[8]=T(a=>V(t(p)),["prevent"]))},{default:m(()=>[n("注册")]),_:1})]),_:1}),o(l,null,{default:m(()=>[n(" 已有账号？ "),o(y,{underline:!1,to:{name:"login"}},{default:m(()=>[n("登录")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])}}});const be=G(O,[["__scopeId","data-v-673c69d5"]]);export{be as default};
